<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <th:block th:insert="header-links :: headLinks"></th:block>
</head>
<body>
<th:block th:insert="navbar :: myNav"></th:block>

<div class="container">
    <div class="w-75 mx-auto">

        <h1 class="my-5 text-center">Product Details</h1>

        <form th:action="@{/admin/product}" method="post" class="row g-3" th:object="${productRequest}">
            <div class="col-md-8 mb-3">
                <label for="productName" class="form-label">Product Name</label>
                <input type="text" class="form-control" id="productName" th:field="*{productName}">
                <span th:if="${#fields.hasErrors('productName')}" th:errors="*{productName}" class="text-danger fs-6"></span>
            </div>
            <div class="col-md-4 mb-3">
                <label for="price" class="form-label">Price</label>
                <input type="text" class="form-control" id="price" th:field="*{productPrice}">
                <span th:if="${#fields.hasErrors('productPrice')}" th:errors="*{productPrice}" class="text-danger fs-6"></span>
            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" rows="3" th:field="*{productDescription}">
                </textarea>
                <span th:if="${#fields.hasErrors('productDescription')}" th:errors="*{productDescription}" class="text-danger fs-6"></span>
            </div>
            <div class="mb-3">
                <label for="urls" class="form-label">Image Urls</label>
                <div id="image-url-container" >
                    <input type="text" class="form-control mb-2"  th:field="*{imageUrls[0]}" placeholder="Enter imge URL">
                </div>
                <button type="button" class="btn btn-secondary" id="add-url-btn">Add More Url</button>
                <span th:if="${#fields.hasErrors('imageUrls')}" th:errors="*{imageUrls}" class="text-danger fs-6"></span>

            </div>

            <button type="submit" class="btn btn-primary">Save Product</button>

        </form>
    </div>
</div>


<th:block th:insert="body-links :: bodyLinks"></th:block>
<script>
    document.getElementById("add-url-btn").addEventListener("click", function (){
        const imageContainer = document.getElementById("image-url-container");
        const index = imageContainer.querySelectorAll("input").length;
        // create new input element
        const newInput = document.createElement("input");
        newInput.type = "text";
        newInput.className = "form-control mb-2";
        newInput.name = "imageUrls["+index+"]";
        newInput.placeholder = "Enter imge URL";
        imageContainer.appendChild(newInput);
    });
</script>
</body>
</html>